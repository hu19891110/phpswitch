<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta name="author" content="Julien Bianchi <contact@jubianchi.fr>">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/bootstrap-responsive.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="http://jubianchi.fr/styles/style.css" media="screen" />
    <style>
        .nav-tabs li.active a {
            color: #ffffff;
            background-color: #0088cc;
        }

        @media (min-width: 1200px) {
            #sidenav.affix {
                width: 258px;
                top: 20px;
            }
        }

        @media (max-width: 767px) {
            #sidenav.affix {
                position: static;
                width: auto;
                top: 0;
            }
        }
    </style>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>jubianchi / phpswitch</title>
</head>


<body data-spy="scroll" data-target="#sidenav">
    <div id="wrap">
        <div class="container">
            <div class="masthead">
                <ul class="nav nav-pills pull-right">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="installer.html">Installer</a></li>
                    <li><a href="https://github.com/jubianchi/phpswitch" target="_blank">Github</a></li>
                </ul>
                <h3 class="muted">jubianchi / phpswitch</h3>
            </div>

            <div class="row-fluid">
                <div class="span3">
                    <div id="sidenav">
                        <ul class="nav nav-tabs nav-list nav-stacked">
                            <li><a href="#how-to-install">How to install</a></li>
                            <li><a href="#enable-phpswitch">Enable phpswitch</a></li>
                            <li><a href="#how-to-use">How to use</a></li>
                            <li><a href="#install-a-new-php-version">Install a new PHP version</a></li>
                            <li><a href="#switch-php-version">Switch PHP version</a></li>
                            <li><a href="#display-the-current-php-version">Display the current PHP version</a></li>
                            <li><a href="#list-available-php-versions">List available PHP version</a></li>
                            <li><a href="#manage-php-configuration">Manage PHP configuration</a></li>
                            <li><a href="#working-with-apache-2">Working with Apache2</a></li>
                            <li><a href="#extras">Extras</a></li>
                            <li><a href="#offline-documentation">Offline documentation</a></li>
                            <li><a href="#shell-prompt">Shell prompt</a></li>
                        </ul>
                    </div>
                </div>
                <div class="span9">
                    <section>
                        <header>
                            <h1 id="how-to-install">How to install</h1>
                        </header>

                        <article>
                            <div class="highlight">
                                <pre><span class="nv">$ </span>curl https://raw.github.com/jubianchi/phpswitch/master/bin/installer | sudo php

<span class="c"># Creates the phpswitch workspace</span>
<span class="nv">$ </span>phpswitch init</pre>
                            </div>

                            <aside class="alert alert-block alert-info">
                                <h4>Info</h4>
                                <p>Read the <a href="installer.html">installer documentation</a> to get more informations.</p>
                            </aside>
                        </article>

                        <article>
                            <header>
                                <h2 id="enable-phpswitch">Enable phpswitch</h2>
                            </header>

                            <p>You can temporarily enable phpswitch using this command :</p>
                            <div class="highlight">
                                <pre><span class="nb">source</span> /usr/share/phpswitch/.phpswitch/.phpswitchrc</pre>
                            </div>

                            <p>If you want to permanently enable phpswitch, add these lines to your <code>.bashrc</code> or <code>.zshrc</code> :</p>

                            <div class="highlight">
                                <pre><span class="nb">source</span> /usr/share/phpswitch/.phpswitch/.phpswitchrc
php switch on &gt; /dev/null</pre>
                            </div>

                            <aside class="alert alert-block">
                                <h4>Warning</h4>
                                <p>Depending on the chosen <a href="installer.html">installation method</a> you will have to <a href="#">adjust settings</a>.</p>
                            </aside>

                            <aside class="alert alert-block alert-info">
                                <h4>Info</h4>
                                <p>
                                    Once enabled, phpswitch will override the default <code>php</code> command. To get usage
                                    informations, use <code>$&nbsp;php&nbsp;-h</code>
                                </p>
                            </aside>
                        </article>
                    </section>

                    <section>
                        <header>
                            <h1 id="how-to-use">How to use</h1>
                        </header>

                        <article>
                            <header>
                                <h2 id="install-a-new-php-version">Install a new PHP version</h2>
                            </header>

                            <p>To install a new PHP version using the default options, run this command :</p>
                            <div class="highlight">
                                <pre><span class="nv">$ </span>phpswitch php:install 5.4.8 --default</pre>
                            </div>

                            <p>To get the full options list, use this command :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>phpswitch <span class="nb">help </span>php:install</pre>
                            </div>

                            <p>With phpswitch, you can install the same PHP version many times using different configurations :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>phpswitch php:install 5.4.8 --alias<span class="o">=</span>atoum --atoum</pre>
                            </div>

                            <p>This will install a new php-5.4.8 with the default atoum configuration. The name of this environment will be <code>atoum-5.4.8</code>.</p>

                            <h2 id="switch-php-version">Switch PHP version</h2>

                            <p>To switch PHP version use this command :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>php switch php-5.4.8</pre>
                            </div>

                            <p>If you want to switch to an aliased PHP version, use this command :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>php switch atoum-5.4.8</pre>
                            </div>

                            <p>To restore the system default PHP version, use this command :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>php switch off</pre>
                            </div>
                        </article>

                        <article>
                            <header>
                                <h2 id="display-the-current-php-version">Display the current PHP version</h2>
                            </header>

                            <p>To display the current PHP version, use one of these commands :</p>

                            <div class="highlight">
                                <pre><span class="c"># Will dislpay the PHP version message</span>
<span class="nv">$ </span>php -v

<span class="c"># Will display the phpswitch PHP version name</span>
<span class="nv">$ </span>phpswitch php:current

<span class="c"># Combine output of both previous commands</span>
<span class="nv">$ </span>php current</pre>
                            </div>
                        </article>

                        <article>
                            <header>
                                <h2 id="list-available-php-versions">List available PHP version</h2>
                            </header>

                            <p>To get the list of installed PHP versions, use this command :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>php list</pre>
                            </div>

                            <p>If you want to get the list of available (installable) PHP versions, use this command :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>phpswitch php:list --available</pre>
                            </div>
                        </article>

                        <article>
                            <header>
                                <h2 id="manage-php-configuration">Manage PHP configuration</h2>
                            </header>

                            <p>With phpswitch you will be able to quickly define or retrieve configuration directives :</p>

                            <p><strong>phpswitch is only able to manage configuration for PHP versions installed through it</strong></p>

                            <div class="highlight">
                                <pre><span class="c"># Retrieves the value of date.timezone</span>
<span class="nv">$ </span>phpswitch php:config date.timezone

<span class="c"># Defines the value of date.timezone</span>
<span class="nv">$ </span>phpswitch php:config date.timezone Europe/Paris

<span class="c"># Same as previous commands</span>
<span class="nv">$ </span>php config date.timezone
<span class="nv">$ </span>php config date.timezone Europe/Paris</pre>
                            </div>

                            <p><strong>phpswitch is only able to work with configuration directives that where defined through it :</strong></p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>phpswitch install 5.4.9 --default

<span class="c"># This command will fail as the directive was not defined through phpswitch</span>
<span class="nv">$ </span>php config error_reporting

<span class="nv">$ </span>php config error_reporting E_ALL

<span class="c"># The command will now succeed as the value was previously defined through phpswitch</span>
<span class="nv">$ </span>php config error_reporting
<span class="nv">error_reporting</span> <span class="o">=</span>&gt; E_ALL</pre>
                            </div>
                        </article>
                    </section>

                    <section>
                        <header>
                            <h1 id="working-with-apache-2">Working with Apache2</h1>
                        </header>

                        <article>
                            <p>
                                phpswitch is able to trigger Apache2 modules build and manage them for you. You will only have to ask
                                when you want to switch the current module :
                            </p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>phpswitch php:install 5.4.8 --default --apxs2<span class="o">=</span>/usr/sbin/apxs

<span class="nv">$ </span>php switch php-5.4.8 --apache2
Switching Apache2 module to php-5.4.8
You should restart apache2 using one of:
    - sudo /etc/init.d/apache2 restart
    - sudo service apache2 restart
    - sudo apachectl restart
    - ...
PHP switched to php-5.4.8
PHP 5.4.8 <span class="o">(</span>cli<span class="o">)</span> <span class="o">(</span>built: Dec 31 2012 23:43:05<span class="o">)</span>
Copyright <span class="o">(</span>c<span class="o">)</span> 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright <span class="o">(</span>c<span class="o">)</span> 1998-2012 Zend Technologies

<span class="nv">$ </span>php switch off
Restoring system default Apache2 module
You should restart apache2 using one of:
    - sudo /etc/init.d/apache2 restart
    - sudo service apache2 restart
    - sudo apachectl restart
    - ...
PHP switched to system default version
PHP 5.3.15 with Suhosin-Patch <span class="o">(</span>cli<span class="o">)</span> <span class="o">(</span>built: Aug 24 2012 17:45:44<span class="o">)</span>
Copyright <span class="o">(</span>c<span class="o">)</span> 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright <span class="o">(</span>c<span class="o">)</span> 1998-2012 Zend Technologies
    with Xdebug v2.2.1, Copyright <span class="o">(</span>c<span class="o">)</span> 2002-2012, by Derick Rethans</pre>
                            </div>
                        </article>
                    </section>

                    <section>
                        <header>
                            <h1 id="extras">Extras</h1>
                        </header>

                        <article>
                            <header>
                                <h2 id="offline-documentation">Offline documentation</h2>
                            </header>

                            <p>phpswitch can help you install and manage your offline PHP documentations :</p>

                            <div class="highlight">
                                <pre><span class="nv">$ </span>phpswitch help php:doc:install
Usage:
    php:doc:install [-f|--format[="..."]] [-l|--lang[="..."]]

Options:
    --format (-f)         Documentation format (html, single-html, chm, chm-enhanced) (default: "html")
    --lang (-l)           Documentation language (en, pt, cn, fr, de, it, ja, pl, ro, ru, es, tr) (default: "en")</pre>
                            </div>

                            <p>
                                This command will install the chosen documentation in the phpswitch workspace to allow offline browsing.
                                You can downland and install multiple formats and languages side by side.
                            </p>
                        </article>

                        <article>
                            <header>
                                <h2 id="shell-prompt">Shell prompt</h2>
                            </header>

                            <p>
                                If you are using <a href="https://github.com/jubianchi/dotfiles">my ZSH theme</a>, you may want to use
                                the phpswitch prompt segment. To do so, make your <code>.zshrc</code> match the following lines :
                            </p>

                            <div class="highlight">
                                <pre><span class="c">##</span>
<span class="c">## ZSH Theme Configuration</span>
<span class="c">##</span>
<span class="nb">source</span> /usr/share/phpswitch/.phpswitch/.phpswitchprompt

<span class="nv">LEFT_PROMPT</span><span class="o">=(</span>status context dir phpswitch sf2 vagrant git<span class="o">)</span>; <span class="nb">export </span>LEFT_PROMPT
<span class="nv">RIGHT_PROMPT</span><span class="o">=(</span>date battery<span class="o">)</span>; <span class="nb">export </span>RIGHT_PROMPT
<span class="nv">ZSH_THEME</span><span class="o">=</span><span class="s2">"jubianchi"</span></pre>
                            </div>

                            <p>
                                As you can see, you will need to source the <code>.phpswitchprompt</code> file and add the
                                <code>phpswitch</code> segment to one of the two prompt parts.
                            </p>
                        </article>
                    </section>
                </div>
            </div>
        </div>
        <div id="push"></div>
    </div>

    <div id="footer">
        <div class="container">
            <p class="muted credit">
                &copy; <a href="https://twitter.com/jubianchi">@jubianchi</a> 2012<br/>
                This website is powered by <a href="http://simonjodet.github.com/gumdrop/" title="Gumdrop">Gumdrop</a> and <a href="http://pages.github.com/">Github pages</a>
            </p>
        </div>
    </div>

    <script src="javascripts/jquery.js"></script>
    <script src="javascripts/bootstrap.js"></script>
    <script type="text/javascript">
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-10349389-8']);
        _gaq.push(['_setDomainName', 'jubianchi.fr']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();

        $(function() {
            $('#sidenav').affix({
                offset: {
                    top: 65,
                    bottom: 0
                }
            })
        });
    </script>
</body>
</html>
